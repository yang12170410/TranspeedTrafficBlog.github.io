<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>【Linux】grep 匹配多个关键字</title>
    <url>/2020/08/20/Linxu%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/Linux-cat-grep%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>grep 命令非常常用，经常用于匹配文本字符。</p>
<p>一般情况下，grep 命令只能匹配一个关键字，怎么实现匹配多个关键字呢？</p>
<p>下面看几种情况：</p>
<h3 id="grep-‘字符串’"><a href="#grep-‘字符串’" class="headerlink" title="grep ‘字符串’"></a>grep ‘字符串’</h3><p>这是最普通的使用方式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">匹配文件中包含 MANPATH 的那一行：</span><br><span class="line">cat manpath.config | grep &#x27;MANPATH&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="grep-v-‘字符串’"><a href="#grep-v-‘字符串’" class="headerlink" title="grep -v ‘字符串’"></a>grep -v ‘字符串’</h3><p>与上例子相反，反向匹配</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">匹配文件中不包含 MANPATH 的那一行：</span><br><span class="line">cat manpath.config| grep -v &#x27;MANPATH&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="grep-E-同时匹配多个关键字–或关系"><a href="#grep-E-同时匹配多个关键字–或关系" class="headerlink" title="grep -E 同时匹配多个关键字–或关系"></a>grep -E 同时匹配多个关键字–或关系</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">grep -E &quot;word1|word2|word3&quot; file.txt</span><br><span class="line">匹配 file.txt 中包含 word1 或 word2 或 word3 的行。</span><br><span class="line">满足其中任意条件（word1、word2和word3之一）就会匹配。</span><br></pre></td></tr></table></figure>

<h3 id="同时匹配多个关键字–与关系"><a href="#同时匹配多个关键字–与关系" class="headerlink" title="同时匹配多个关键字–与关系"></a>同时匹配多个关键字–与关系</h3><p>使用管道符连接多个 grep ，间接实现多个关键字的与关系匹配：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">grep word1 file.txt | grep word2 |grep word3</span><br><span class="line">必须同时满足三个条件（word1、word2和word3）才匹配。</span><br></pre></td></tr></table></figure>

<h3 id="查找被匹配到数据的前2行-（A-表示后几行、B表示前几行、C表示前后几行）"><a href="#查找被匹配到数据的前2行-（A-表示后几行、B表示前几行、C表示前后几行）" class="headerlink" title="查找被匹配到数据的前2行 （A 表示后几行、B表示前几行、C表示前后几行）"></a>查找被匹配到数据的前2行 （A 表示后几行、B表示前几行、C表示前后几行）</h3><p>使用管道符连接多个 grep ，间接实现多个关键字的与关系匹配：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">grep -B 2 aa test.txt</span><br></pre></td></tr></table></figure>






















]]></content>
      <categories>
        <category>Linux常用命令</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>【Linux】find命令</title>
    <url>/2020/08/20/Linxu%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/Linux-find%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>find [OPTIONS] [查找起始路径] [查找条件] [处理动作]</p>
<p>[查找起始路径] ：制定具体搜索目标起始路径；默认为当前目录。</p>
<p>[查找条件]：指定的查找标准，可以根据文件名，大小，类型，从属关系，时间戳，权限等标准进行；默认为找出指定目录下的所有文件。</p>
<p>[处理动作]：对符合查找条件的文件做出的操作，例如删除等操作；默认为输出至标准输出。</p>
<h3 id="查找某个文件"><a href="#查找某个文件" class="headerlink" title="查找某个文件"></a>查找某个文件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">find ./ -name test*  </span><br><span class="line">./test.mp4</span><br><span class="line">-name 区分大小  -iname 不区分大小写 ./ 表示当前路径下</span><br></pre></td></tr></table></figure>

<h3 id="查找空文件并执行删除"><a href="#查找空文件并执行删除" class="headerlink" title="查找空文件并执行删除"></a>查找空文件并执行删除</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">find ./ -type f -empty -exec rm -f &#123;&#125; \;</span><br></pre></td></tr></table></figure>


<h3 id="删除大文件命令"><a href="#删除大文件命令" class="headerlink" title="删除大文件命令"></a>删除大文件命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. ls -i  获取乱码文件节点号 2. find . -inum 节点号 -delete</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Linux常用命令</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>【Linux】vi命令大全</title>
    <url>/2020/08/19/Linxu%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/linux-vi%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h3 id="进入vi的命令"><a href="#进入vi的命令" class="headerlink" title="进入vi的命令"></a>进入vi的命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi filename :打开或新建文件，并将光标置于第一行首 </span><br><span class="line">vi +n filename ：打开文件，并将光标置于第n行首 </span><br><span class="line">vi + filename ：打开文件，并将光标置于最后一行首 </span><br><span class="line">vi +/pattern filename：打开文件，并将光标置于第一个与pattern匹配的串处 </span><br><span class="line">vi -r filename ：在上次正用vi编辑时发生系统崩溃，恢复filename </span><br><span class="line">vi filename....filename ：打开多个文件，依次进行编辑</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="移动光标类命令"><a href="#移动光标类命令" class="headerlink" title="移动光标类命令"></a>移动光标类命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">h ：光标左移一个字符 </span><br><span class="line">l ：光标右移一个字符 </span><br><span class="line">space：光标右移一个字符 </span><br><span class="line">Backspace：光标左移一个字符 </span><br><span class="line">k或Ctrl+p：光标上移一行 </span><br><span class="line">j或Ctrl+n ：光标下移一行 </span><br><span class="line">Enter ：光标下移一行 </span><br><span class="line">w或W ：光标右移一个字至字首 </span><br><span class="line">b或B ：光标左移一个字至字首 </span><br><span class="line">e或E ：光标右移一个字至字尾 </span><br><span class="line">) ：光标移至句尾 </span><br><span class="line">( ：光标移至句首 </span><br><span class="line">&#125;：光标移至段落开头 </span><br><span class="line">&#123;：光标移至段落结尾 </span><br><span class="line">nG：光标移至第n行首 </span><br><span class="line">n+：光标下移n行 </span><br><span class="line">n-：光标上移n行 </span><br><span class="line">n$：光标移至第n行尾 </span><br><span class="line">H ：光标移至屏幕顶行 </span><br><span class="line">M ：光标移至屏幕中间行 </span><br><span class="line">L ：光标移至屏幕最后行 </span><br><span class="line">0：（注意是数字零）光标移至当前行首 </span><br><span class="line">$：光标移至当前行尾</span><br></pre></td></tr></table></figure>

<h3 id="屏幕翻滚类命令"><a href="#屏幕翻滚类命令" class="headerlink" title="屏幕翻滚类命令"></a>屏幕翻滚类命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Ctrl+u：向文件首翻半屏 </span><br><span class="line">Ctrl+d：向文件尾翻半屏 </span><br><span class="line">Ctrl+f：向文件尾翻一屏 </span><br><span class="line">Ctrl＋b；向文件首翻一屏 </span><br><span class="line">nz：将第n行滚至屏幕顶部，不指定n时将当前行滚至屏幕顶部。</span><br></pre></td></tr></table></figure>

<h3 id="插入文本类命令"><a href="#插入文本类命令" class="headerlink" title="插入文本类命令"></a>插入文本类命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">i ：在光标前 </span><br><span class="line">I ：在当前行首 </span><br><span class="line">a：光标后 </span><br><span class="line">A：在当前行尾 </span><br><span class="line">o：在当前行之下新开一行 </span><br><span class="line">O：在当前行之上新开一行 </span><br><span class="line">r：替换当前字符 </span><br><span class="line">R：替换当前字符及其后的字符，直至按ESC键 </span><br><span class="line">s：从当前光标位置处开始，以输入的文本替代指定数目的字符 </span><br><span class="line">S：删除指定数目的行，并以所输入文本代替之 </span><br><span class="line">ncw或nCW：修改指定数目的字 </span><br><span class="line">nCC：修改指定数目的行</span><br></pre></td></tr></table></figure>
<h3 id="删除命令"><a href="#删除命令" class="headerlink" title="删除命令"></a>删除命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ndw或ndW：删除光标处开始及其后的n-1个字 </span><br><span class="line">do：删至行首 </span><br><span class="line">d$：删至行尾 </span><br><span class="line">ndd：删除当前行及其后n-1行 </span><br><span class="line">x或X：删除一个字符，x删除光标后的，而X删除光标前的 </span><br><span class="line">Ctrl+u：删除输入方式下所输入的文本</span><br></pre></td></tr></table></figure>

<h3 id="搜索及替换命令"><a href="#搜索及替换命令" class="headerlink" title="搜索及替换命令"></a>搜索及替换命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/pattern：从光标开始处向文件尾搜索pattern </span><br><span class="line">?pattern：从光标开始处向文件首搜索pattern </span><br><span class="line">n：在同一方向重复上一次搜索命令 </span><br><span class="line">N：在反方向上重复上一次搜索命令 </span><br><span class="line">：s/p1/p2/g：将当前行中所有p1均用p2替代 </span><br><span class="line">：n1,n2s/p1/p2/g：将第n1至n2行中所有p1均用p2替代 </span><br><span class="line">：g/p1/s//p2/g：将文件中所有p1均用p2替换</span><br></pre></td></tr></table></figure>













]]></content>
      <categories>
        <category>Linux常用命令</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>【Linux】服务器常用命令</title>
    <url>/2020/12/03/Linxu%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h3 id="系统服务命令"><a href="#系统服务命令" class="headerlink" title="系统服务命令"></a>系统服务命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">下面以nfs服务为例：</span><br><span class="line"></span><br><span class="line">1.启动nfs服务</span><br><span class="line"></span><br><span class="line">systemctl start nfs-server.service</span><br><span class="line">2.设置开机自启动</span><br><span class="line"></span><br><span class="line">systemctl enable nfs-server.service</span><br><span class="line">3.停止开机自启动</span><br><span class="line"></span><br><span class="line">systemctl disable nfs-server.service</span><br><span class="line">4.查看服务当前状态</span><br><span class="line"></span><br><span class="line">systemctl status nfs-server.service</span><br><span class="line">5.重新启动某服务</span><br><span class="line"></span><br><span class="line">systemctl restart nfs-server.service</span><br><span class="line">6.查看所有已启动的服务</span><br><span class="line"></span><br><span class="line">systemctl list -units --type=service</span><br><span class="line">开启防火墙22端口</span><br><span class="line"></span><br><span class="line">iptables -I INPUT -p tcp --dport 22 -j ACCEPT</span><br><span class="line">如果仍然有问题，就可能是SELinux导致的</span><br><span class="line"></span><br><span class="line">关闭SElinux：</span><br><span class="line"></span><br><span class="line">修改/etc/selinux/config文件中的SELINUX=”” 为 disabled，然后重启</span><br><span class="line"></span><br><span class="line">彻底关闭防火墙：</span><br><span class="line"></span><br><span class="line">sudo systemctl status  firewalld.service</span><br><span class="line">sudo systemctl stop firewalld.service          </span><br><span class="line">sudo systemctl disable firewalld.service</span><br></pre></td></tr></table></figure>


<h3 id="查看Linux内核版本命令（两种方法）："><a href="#查看Linux内核版本命令（两种方法）：" class="headerlink" title="查看Linux内核版本命令（两种方法）："></a>查看Linux内核版本命令（两种方法）：</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- cat /proc/version</span><br><span class="line">Linux version 3.13.0-86-generic (buildd@lgw01-19) (gcc version 4.8.2 (Ubuntu 4.8.2-19ubuntu1) ) #130-Ubuntu SMP Mon Apr 18 18:27:15 UTC 2016</span><br><span class="line"></span><br><span class="line">-- uname -a</span><br><span class="line">Linux iZ11d3eyl10Z 3.13.0-86-generic #130-Ubuntu SMP Mon Apr 18 18:27:15 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux</span><br></pre></td></tr></table></figure>

<h3 id="ubuntu默认软件包管理器"><a href="#ubuntu默认软件包管理器" class="headerlink" title="ubuntu默认软件包管理器"></a>ubuntu默认软件包管理器</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">不是yum，而是dpkg，安装软件时用apt-get</span><br></pre></td></tr></table></figure>


<h3 id="linux怎样查看-某项服务-当前启动状态"><a href="#linux怎样查看-某项服务-当前启动状态" class="headerlink" title="linux怎样查看 某项服务 当前启动状态"></a>linux怎样查看 某项服务 当前启动状态</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#service servicename status是当前状态</span><br><span class="line"></span><br><span class="line">#chkconfig --list servicename是查看启动baidu状态，也就是是否开机自动启动</span><br><span class="line"></span><br><span class="line">注：</span><br><span class="line"></span><br><span class="line">1、如果service和chkconfig 找不到，可以试zhi试/sbin/service和/sbin/chkconfig</span><br><span class="line"></span><br><span class="line">2、如果用ubuntu好像是要用/etc/init.d/servicename status查看当前状态</span><br><span class="line"></span><br><span class="line">（servicename就是你要查的服务名）</span><br></pre></td></tr></table></figure>

<h3 id="VMware-CentOS7-启动黑屏的解决办法"><a href="#VMware-CentOS7-启动黑屏的解决办法" class="headerlink" title="VMware_CentOS7 启动黑屏的解决办法"></a>VMware_CentOS7 启动黑屏的解决办法</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#windows系统搜索cmd，右键cmd.exe以管理员身份启动，输入 netsh winsock reset 回车。重启计算机，重启vmware即可。</span><br></pre></td></tr></table></figure>


<h3 id="Linux-定时任务清除缓存"><a href="#Linux-定时任务清除缓存" class="headerlink" title="Linux 定时任务清除缓存"></a>Linux 定时任务清除缓存</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1、编写.sh清除缓存的脚步，保存在指定路径</span><br><span class="line">vi removeCache.sh </span><br><span class="line">#!/bin/bash</span><br><span class="line">sudo sh -c &#x27;echo 3 &gt; /proc/sys/vm/drop_caches&#x27;</span><br><span class="line">#echo &quot;定时清理缓存&quot; &gt;&gt; /home/work/bat/remove.txt</span><br><span class="line"></span><br><span class="line">2、开启定时任务(centos)</span><br><span class="line">vim /etc/crontab</span><br><span class="line"></span><br><span class="line"> # For details see man 4 crontabs</span><br><span class="line">  </span><br><span class="line">  # Example of job definition:</span><br><span class="line">  # .---------------- minute (0 - 59)</span><br><span class="line">  # |  .------------- hour (0 - 23)</span><br><span class="line">  # |  |  .---------- day of month (1 - 31)</span><br><span class="line">  # |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span><br><span class="line">  # |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span><br><span class="line">  # |  |  |  |  |</span><br><span class="line">  # *  *  *  *  * user-name  command to be executed</span><br><span class="line">  0 4 * * * root /home/work/bat/removeCache.sh &gt;&gt;/home/work/bat/removeCache.txt</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>






]]></content>
      <categories>
        <category>Linux常用命令</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql数据库的增删改查(进阶篇)</title>
    <url>/2020/09/16/Mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5(%E8%BF%9B%E9%98%B6%E7%AF%87)/</url>
    <content><![CDATA[<h2 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h2><h3 id="1-聚合函数"><a href="#1-聚合函数" class="headerlink" title="1.聚合函数"></a>1.聚合函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th align="right">说明</th>
</tr>
</thead>
<tbody><tr>
<td>COUNT([DISTINCT] expr)</td>
<td align="right">返回查询到的数据的数量</td>
</tr>
<tr>
<td>SUM([DISTINCT] expr)</td>
<td align="right">返回查询到的数据的总和，不是数字没有意义</td>
</tr>
<tr>
<td>AVG([DISTINCT] expr)</td>
<td align="right">返回查询到的数据的平均值，不是数字没有意义</td>
</tr>
<tr>
<td>MAX([DISTINCT] expr)</td>
<td align="right">返回查询到的数据的最大值，不是数字没有意义</td>
</tr>
<tr>
<td>MIN([DISTINCT] expr)</td>
<td align="right">返回查询到的数据的数量，不是数字没有意义</td>
</tr>
</tbody></table>
<p>例：<br>COUNT:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 统计班级共有多少同学 </span><br><span class="line"></span><br><span class="line">SELECT COUNT(*) FROM student; </span><br><span class="line">SELECT COUNT(0) FROM student;</span><br><span class="line"></span><br><span class="line">-- 统计班级收集的 qq_mail 有多少个，qq_mail 为 NULL 的数据不会计入结果 </span><br><span class="line">SELECT COUNT(qq_mail) FROM student;</span><br></pre></td></tr></table></figure>

<p>例：<br>SUM：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 统计数学成绩总分 SELECT SUM(math) FROM exam_result;</span><br><span class="line">-- 不及格 &lt; 60 的总分，没有结果，返回 NULL </span><br><span class="line"></span><br><span class="line">SELECT SUM(math) FROM exam_result WHERE math &lt; 60; </span><br></pre></td></tr></table></figure>

<p>例：<br>AVG：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 统计平均总分 </span><br><span class="line"></span><br><span class="line">SELECT AVG(chinese + math + english) 平均总分 FROM exam_result;</span><br></pre></td></tr></table></figure>

<p>例：<br>MAX：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 返回英语最高分 </span><br><span class="line"></span><br><span class="line">SELECT MAX(english) FROM exam_result;</span><br></pre></td></tr></table></figure>

<p>例：<br>MIN：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 返回 &gt; 70 分以上的数学最低分 </span><br><span class="line"></span><br><span class="line">SELECT MIN(math) FROM exam_result WHERE math &gt; 70;</span><br></pre></td></tr></table></figure>


<h3 id="2-GROUP-BY子句"><a href="#2-GROUP-BY子句" class="headerlink" title="2.GROUP BY子句"></a>2.GROUP BY子句</h3><p>SELECT 中使用 GROUP BY 子句可以对指定列进行分组查询。需要满足：使用 GROUP BY 进行分组查 询时，SELECT 指定的字段必须是“分组依据字段”，其他字段若想出现在SELECT 中则必须包含在聚合函 数中。</p>
<p>select column1, sum(column2), … from table group by column1;</p>
<p>例:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--查询每个角色的最高工资、最低工资和平均工资</span><br><span class="line"></span><br><span class="line">select role,max(salary),min(salary),avg(salary) from emp group by role;</span><br></pre></td></tr></table></figure>


<h3 id="3-HAVING"><a href="#3-HAVING" class="headerlink" title="3.HAVING"></a>3.HAVING</h3><p>GROUP BY 子句进行分组以后，需要对分组结果再进行条件过滤时，不能使用 WHERE 语句，而需要用 HAVING</p>
<p>例:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select role,max(salary),min(salary),avg(salary) from emp group by role having avg(salary)&lt;1500; </span><br></pre></td></tr></table></figure>

<hr>
<h2 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h2><h3 id="1-内连接"><a href="#1-内连接" class="headerlink" title="1.内连接"></a>1.内连接</h3><p>select 字段 from 表1 别名1 [inner] join 表2 别名2 on 连接条件 and 其他条件;<br>–或者<br>select 字段 from 表1 别名1,表2 别名2 where 连接条件 and 其他条件;</p>
<p>例:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--查询许仙同学的成绩</span><br><span class="line"></span><br><span class="line">select sco.score from student stu inner join score sco on stu.id=sco.student_id and stu.name=&#x27;许仙&#x27;; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 或者 </span><br><span class="line"></span><br><span class="line">select sco.score from student stu, score sco where stu.id=sco.student_id and stu.name=&#x27;许仙&#x27;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--查询所有同学的总成绩，及同学的个人信息;</span><br><span class="line">-- 成绩表对学生表是多对1关系，查询总成绩是根据成绩表的同学id来进行分组的 </span><br><span class="line"></span><br><span class="line">SELECT    </span><br><span class="line">stu.sn,    </span><br><span class="line">stu.NAME,    </span><br><span class="line">stu.qq_mail,    </span><br><span class="line">sum( sco.score ) </span><br><span class="line">FROM    </span><br><span class="line">student stu   </span><br><span class="line">JOIN score sco ON stu.id = sco.student_id</span><br><span class="line">GROUP BY    </span><br><span class="line">sco.student_id;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--查询所有同学的成绩，及同学的个人信息：</span><br><span class="line">--学生表、成绩表、课程表3张表关联查询 </span><br><span class="line"></span><br><span class="line">SELECT    </span><br><span class="line">stu.id,    </span><br><span class="line">stu.sn,    </span><br><span class="line">stu.NAME,    </span><br><span class="line">stu.qq_mail,    </span><br><span class="line">sco.score,    </span><br><span class="line">sco.course_id,    </span><br><span class="line">cou.NAME FROM    </span><br><span class="line">student stu    </span><br><span class="line">JOIN score sco ON stu.id = sco.student_id    </span><br><span class="line">JOIN course cou ON sco.course_id = cou.id </span><br><span class="line">ORDER BY</span><br><span class="line">stu.id;</span><br></pre></td></tr></table></figure>

<h3 id="2-外连接"><a href="#2-外连接" class="headerlink" title="2.外连接"></a>2.外连接</h3><p>外连接分为左外连接和右外连接。如果联合查询，左侧的表完全显示我们就说是左外连接；右侧的表完 全显示我们就说是右外连接</p>
<p>– 左外连接，表1完全显示 select 字段名 from 表名1 left join 表名2 on 连接条件;<br>– 右外连接，表2完全显示 select 字段 from 表名1 right join 表名2 on 连接条件;</p>
<p>例:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--查询所有同学的成绩，及同学的个人信息，如果该同学没有成绩，也需要显示</span><br><span class="line">-- “老外学中文”同学 没有考试成绩，也显示出来了 </span><br><span class="line"></span><br><span class="line">select * from student stu left join score sco on stu.id=sco.student_id; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 对应的右外连接为： </span><br><span class="line"></span><br><span class="line">select * from  score sco right join student stu on stu.id=sco.student_id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 学生表、成绩表、课程表3张表关联查询</span><br><span class="line"> </span><br><span class="line">SELECT    </span><br><span class="line">stu.id,    </span><br><span class="line">stu.sn,    </span><br><span class="line">stu.NAME,    </span><br><span class="line">stu.qq_mail,    </span><br><span class="line">sco.score,    </span><br><span class="line">sco.course_id,    </span><br><span class="line">cou.NAME FROM    </span><br><span class="line">student stu    </span><br><span class="line">LEFT JOIN score sco ON stu.id = sco.student_id    LEFT JOIN course cou ON sco.course_id = cou.id </span><br><span class="line">ORDER BY    </span><br><span class="line">stu.id; </span><br></pre></td></tr></table></figure>


<h3 id="3-自连接"><a href="#3-自连接" class="headerlink" title="3.自连接"></a>3.自连接</h3><p>自连接是指在同一张表连接自身进行查询。</p>
<p>例:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 先查询“计算机原理”和“Java”课程的id </span><br><span class="line"></span><br><span class="line">select id,name from course where name=&#x27;Java&#x27; or name=&#x27;计算机原理&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 再查询成绩表中，“计算机原理”成绩比“Java”成绩 好的信息 </span><br><span class="line"></span><br><span class="line">SELECT    </span><br><span class="line">s1.* </span><br><span class="line">FROM    </span><br><span class="line">score s1,    </span><br><span class="line">score s2 </span><br><span class="line">WHERE    </span><br><span class="line">s1.student_id = s2.student_id </span><br><span class="line"> AND s1.score &lt; s2.score     </span><br><span class="line"> AND s1.course_id = 1     </span><br><span class="line"> AND s2.course_id = 3;</span><br></pre></td></tr></table></figure>

<h3 id="4-自连接"><a href="#4-自连接" class="headerlink" title="4.自连接"></a>4.自连接</h3><p>子查询是指嵌入在其他sql语句中的select语句，也叫嵌套查询</p>
<ul>
<li><p>单行子查询:<br>例:<br>返回一行记录的子查询 查询与“不想毕业” 同学的同班同学;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from student where classes_id=(select classes_id from student where name=&#x27;不想毕业&#x27;);</span><br></pre></td></tr></table></figure></li>
<li><p>多行子查询：<br>例:<br>返回多行记录的子查询 查询“语文”或“英文”课程的成绩信息</p>
</li>
</ul>
<p>IN关键字 同理也有NOT IN 用法相同</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from score where course_id in (select id from course where name=&#x27;语文&#x27; or name=&#x27;英文&#x27;);</span><br></pre></td></tr></table></figure>
<p>EXISTS关键字 同理也有NOT EXISTS 用法相同</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from score sco where exists (select sco.id from course cou where (name=&#x27;语文&#x27; or name=&#x27;英文&#x27;) and cou.id = sco.course_id);</span><br></pre></td></tr></table></figure>

<h3 id="5-合并查询"><a href="#5-合并查询" class="headerlink" title="5.合并查询"></a>5.合并查询</h3><p>在实际应用中，为了合并多个select的执行结果，可以使用集合操作符 union，union all。使用UNION 和UNION ALL时，前后查询的结果集中，字段需要一致。</p>
<ul>
<li>union<br>该操作符用于取得两个结果集的并集。当使用该操作符时，会自动去掉结果集中的重复行。<br>例:<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from course where id&lt;3 </span><br><span class="line">union </span><br><span class="line">select * from course where name=&#x27;英文&#x27;;</span><br><span class="line">-- 相当于 </span><br><span class="line">select * from course where id&lt;3 or name=&#x27;英文&#x27;;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>union all</li>
</ul>
<p>该操作符用于取得两个结果集的并集。当使用该操作符时，不会去掉结果集中的重复行。</p>
]]></content>
      <categories>
        <category>Mysql常用命令</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>netstat命令格式</title>
    <url>/2020/08/19/windows%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/windowsnetstat%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h3 id="windows-netstat命令格式"><a href="#windows-netstat命令格式" class="headerlink" title="windows netstat命令格式"></a>windows netstat命令格式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">netstat [选项]</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">命令中各选项的含义如下：</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">-a 显示所有socket，包括正在监听的。</span><br><span class="line"></span><br><span class="line">-c 每隔1秒就重新显示一遍，直到用户中断它。</span><br><span class="line"></span><br><span class="line">-i 显示所有网络接口的信息，格式同“ifconfig -e”。</span><br><span class="line"></span><br><span class="line">-n 以网络IP地址代替名称，显示出网络连接情形。</span><br><span class="line"></span><br><span class="line">-r 显示核心路由表，格式同“route -e”。</span><br><span class="line"></span><br><span class="line">-t 显示TCP协议的连接情况。</span><br><span class="line"></span><br><span class="line">-u 显示UDP协议的连接情况。</span><br><span class="line"></span><br><span class="line">-v 显示正在进行的工作。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">-A 显示任何关联的协议控制块的地址。主要用于调试</span><br><span class="line"></span><br><span class="line">-a 显示所有套接字的状态。在一般情况下不显示与服务器进程相关联的套接字</span><br><span class="line"></span><br><span class="line">-i 显示自动配置接口的状态。那些在系统初始引导后配置的接口状态不在输出之列</span><br><span class="line"></span><br><span class="line">-m 打印网络存储器的使用情况</span><br><span class="line"></span><br><span class="line">-n 打印实际地址，而不是对地址的解释或者显示主机，网络名之类的符号</span><br><span class="line"></span><br><span class="line">-r 打印路由选择表</span><br><span class="line"></span><br><span class="line">-f address -family对于给出名字的地址簇打印统计数字和控制块信息。到目前为止，唯一支持的地址簇是inet</span><br><span class="line"></span><br><span class="line">-I interface 只打印给出名字的接口状态</span><br><span class="line"></span><br><span class="line">-p protocol-name 只打印给出名字的协议的统计数字和协议控制块信息</span><br><span class="line"></span><br><span class="line">-s 打印每个协议的统计数字</span><br><span class="line"></span><br><span class="line">-t 在输出显示中用时间信息代替队列长度信息。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">netstat命令的列标题</span><br><span class="line"></span><br><span class="line">Name 接口的名字</span><br><span class="line"></span><br><span class="line">Mtu 接口的最大传输单位</span><br><span class="line"></span><br><span class="line">Net/Dest 接口所在的网络</span><br><span class="line"></span><br><span class="line">Address 接口的IP地址</span><br><span class="line"></span><br><span class="line">Ipkts 接收到的数据包数目</span><br><span class="line"></span><br><span class="line">Ierrs 接收到时已损坏的数据包数目</span><br><span class="line"></span><br><span class="line">Opkts 发送的数据包数目</span><br><span class="line"></span><br><span class="line">Oeers 发送时已损坏的数据包数目</span><br><span class="line"></span><br><span class="line">Collisions 由这个接口所记录的网络冲突数目</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">netstat的一些常用选项：</span><br><span class="line"></span><br><span class="line">netstat -s--本选项能够按照各个协议分别显示其统计数据。如果你的应用程序（如Web浏览器）运行速度比较慢，或者不能显示Web页之类的数据，那么你就可以用本选项来查看一下所显示的信息。你需要仔细查看统计数据的各行，找到出错的关键字，进而确定问题所在。</span><br><span class="line"></span><br><span class="line">netstat -e--本选项用于显示关于以太网的统计数据。它列出的项目包括传送的数据报的总字节数、错误数、删除数、数据报的数量和广播的数量。这些统计数据既有发送的数据报数量，也有接收的数据报数量。这个选项可以用来统计一些基本的网络流量）。</span><br><span class="line"></span><br><span class="line">netstat -r--本选项可以显示关于路由表的信息，类似于后面所讲使用route print命令时看到的 信息。除了显示有效路由外，还显示当前有效的连接。</span><br><span class="line"></span><br><span class="line">netstat -a--本选项显示一个所有的有效连接信息列表，包括已建立的连接（ESTABLISHED），也包括监听连接请求（LISTENING）的那些连接。</span><br><span class="line"></span><br><span class="line">bnetstat -n--显示所有已建立的有效连接。</span><br><span class="line"></span><br><span class="line">« AWKPHP经典 »netstat -an中state含义</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">netstat -an中state含义</span><br><span class="line"></span><br><span class="line">LISTEN：侦听来自远方的TCP端口的连接请求</span><br><span class="line"></span><br><span class="line">SYN-SENT：再发送连接请求后等待匹配的连接请求</span><br><span class="line"></span><br><span class="line">SYN-RECEIVED：再收到和发送一个连接请求后等待对方对连接请求的确认</span><br><span class="line"></span><br><span class="line">ESTABLISHED：代表一个打开的连接</span><br><span class="line"></span><br><span class="line">FIN-WAIT-1：等待远程TCP连接中断请求，或先前的连接中断请求的确认</span><br><span class="line"></span><br><span class="line">FIN-WAIT-2：从远程TCP等待连接中断请求</span><br><span class="line"></span><br><span class="line">CLOSE-WAIT：等待从本地用户发来的连接中断请求</span><br><span class="line"></span><br><span class="line">CLOSING：等待远程TCP对连接中断的确认</span><br><span class="line"></span><br><span class="line">LAST-ACK：等待原来的发向远程TCP的连接中断请求的确认</span><br><span class="line"></span><br><span class="line">TIME-WAIT：等待足够的时间以确保远程TCP接收到连接中断请求的确认</span><br><span class="line"></span><br><span class="line">CLOSED：没有任何连接状态</span><br></pre></td></tr></table></figure>

<h3 id="windows-netstat命令详解"><a href="#windows-netstat命令详解" class="headerlink" title="windows netstat命令详解"></a>windows netstat命令详解</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">开始--运行--cmd 进入命令提示符 输入netstat -ano 即可看到所有连接的PID 之后在任务管理器中找到这个PID所对应的程序如果任务管理器中没有PID这一项,可以在任务管理器中选&quot;查看&quot;-&quot;选择列&quot;</span><br><span class="line"></span><br><span class="line">经常，我们在启动应用的时候发现系统需要的端口被别的程序占用，如何知道谁占有了我们需要的端口，很多人都比较头疼，下面就介绍一种非常简单的方法，希望对大家有用</span><br><span class="line"></span><br><span class="line">假如我们需要确定谁占用了我们的9050端口</span><br><span class="line"></span><br><span class="line">1、Windows平台</span><br><span class="line">在windows命令行窗口下执行：</span><br><span class="line">1.查看所有的端口占用情况</span><br><span class="line"></span><br><span class="line">C:\&gt;netstat -ano</span><br><span class="line"></span><br><span class="line">  协议    本地地址                     外部地址               状态                   PID</span><br><span class="line"></span><br><span class="line">  TCP    127.0.0.1:1434         0.0.0.0:0              LISTENING       3236</span><br><span class="line">  TCP    127.0.0.1:5679         0.0.0.0:0              LISTENING       4168</span><br><span class="line">  TCP    127.0.0.1:7438         0.0.0.0:0              LISTENING       4168</span><br><span class="line">  TCP    127.0.0.1:8015         0.0.0.0:0              LISTENING       1456</span><br><span class="line">  TCP    192.168.3.230:139      0.0.0.0:0              LISTENING       4</span><br><span class="line">  TCP    192.168.3.230:1957     220.181.31.225:443     ESTABLISHED     3068</span><br><span class="line">  TCP    192.168.3.230:2020     183.62.96.189:1522     ESTABLISHED     1456</span><br><span class="line">  TCP    192.168.3.230:2927     117.79.91.18:80        ESTABLISHED     4732</span><br><span class="line">  TCP    192.168.3.230:2929     117.79.91.18:80        ESTABLISHED     4732</span><br><span class="line">  TCP    192.168.3.230:2930     117.79.91.18:80        ESTABLISHED     4732</span><br><span class="line">  TCP    192.168.3.230:2931     117.79.91.18:80        ESTABLISHED     4732</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">2.查看指定端口的占用情况</span><br><span class="line">C:\&gt;netstat -aon|findstr &quot;9050&quot;</span><br><span class="line"></span><br><span class="line">  协议    本地地址                     外部地址               状态                   PID</span><br><span class="line"></span><br><span class="line">  TCP    127.0.0.1:9050         0.0.0.0:0              LISTENING       2016</span><br><span class="line"></span><br><span class="line">P: 看到了吗，端口被进程号为2016的进程占用，继续执行下面命令： （也可以去任务管理器中查看pid对应的进程）</span><br><span class="line"></span><br><span class="line">3.查看PID对应的进程</span><br><span class="line">C:\&gt;tasklist|findstr &quot;2016&quot;</span><br><span class="line"></span><br><span class="line"> 映像名称                       PID 会话名              会话#       内存使用</span><br><span class="line"> ========================= ======== ================</span><br><span class="line">  tor.exe                     2016 Console                 0     16,064 K</span><br><span class="line"></span><br><span class="line">P:很清楚吧，tor占用了你的端口。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">4.结束该进程</span><br><span class="line"></span><br><span class="line">C:\&gt;taskkill /f /t /im tor.exe</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>windows常用命令</category>
      </categories>
      <tags>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows 设置IP的几种脚本方式</title>
    <url>/2020/08/28/windows%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/windows%E5%9B%BA%E5%AE%9AIP%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<h3 id="Windows-DHCP方式bat-脚本"><a href="#Windows-DHCP方式bat-脚本" class="headerlink" title="Windows DHCP方式bat 脚本"></a>Windows DHCP方式bat 脚本</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">netsh interface ip set address name=&quot;以太网 2&quot; source=dhcp </span><br></pre></td></tr></table></figure>


<h3 id="Windows-固定IP方式bat-脚本"><a href="#Windows-固定IP方式bat-脚本" class="headerlink" title="Windows 固定IP方式bat 脚本"></a>Windows 固定IP方式bat 脚本</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">set ipaddr=172.16.13.15</span><br><span class="line">set mask=255.255.255.0</span><br><span class="line">set gateway=172.16.13.1</span><br><span class="line">set dnsaddr=114.114.114.114</span><br><span class="line">netsh interface ip set address name=&quot;以太网 2&quot; source=static address=%ipaddr% mask=%mask% gateway=%gateway% 1</span><br><span class="line">netsh interface ip set dnsservers name=&quot;以太网 2&quot; source=static address=%dnsaddr%</span><br><span class="line">netsh interface ip add address &quot;以太网 2&quot; 192.168.1.180 255.255.255.0</span><br><span class="line">netsh interface ip add address &quot;以太网 2&quot; 192.168.10.180 255.255.255.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pause</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>windows常用命令</category>
      </categories>
      <tags>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>相机常见问题汇总</title>
    <url>/2023/03/16/%E8%AE%BE%E5%A4%87%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99/%E7%9B%B8%E6%9C%BA%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</url>
    <content><![CDATA[<h3 id="相机相关关技术资料"><a href="#相机相关关技术资料" class="headerlink" title="相机相关关技术资料"></a>相机相关关技术资料</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1）德亚相机 获取一帧图片，不支持谷歌浏览器。</span><br><span class="line">http://172.16.13.227/snapshot/stream0.jpg</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2）德亚相机 获取实时图片流，仅支持谷歌浏览器 。</span><br><span class="line">http://172.16.13.227/livefeed/stream0</span><br><span class="line"></span><br><span class="line">次码流就是stream1</span><br><span class="line"></span><br><span class="line">全图  	1/4 ,  	1/16</span><br><span class="line">stream1 ，stream2， stream3</span><br><span class="line"></span><br><span class="line">3）德亚相机rtspd码流格式</span><br><span class="line">rtsp://153.34.66.23/track1</span><br><span class="line">rtsp://153.34.66.23/track2</span><br><span class="line"></span><br><span class="line">rtsp://192.168.1.210/Streaming/Channels/101  主码流</span><br><span class="line">rtsp://192.168.1.210/Streaming/Channels/102  辅码流</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">德亚：rtsp://172.16.12.198/track1   1：主码流  2:次码流  </span><br><span class="line">          rtsp://admin:transpeed@192.168.1.210:554/Streaming/Channels/101  主码流</span><br><span class="line">          rtsp://admin:transpeed@192.168.1.210:554/Streaming/Channels/102  辅码流</span><br><span class="line"></span><br><span class="line">华夏：rtsp://172.16.12.199/stream_main</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">需要测试是否可行：</span><br><span class="line">华夏：rtsp://admin:admin@172.16.12.198/track1   0：主码流  1:次码流  </span><br><span class="line">华夏：rtsp://admin:admin@172.16.12.199/stream_main</span><br><span class="line"></span><br><span class="line">大华：rtsp://admin:admin@172.16.12.168:554/cam/realmonitor?channel=1&amp;subtype=1</span><br><span class="line"></span><br><span class="line">海康：rtsp://admin:szdycs123456@172.16.12.168/Streaming/Channels/101</span><br><span class="line">海康：rtsp://admin:szdycs123456@172.16.12.169/Streaming/Channels/101</span><br><span class="line">101：主码流</span><br><span class="line">102：次码流</span><br><span class="line"></span><br><span class="line">雄迈摄像头RTSP地址格式</span><br><span class="line">rtsp://10.6.10.25:554/user=admin&amp;password=&amp;channel=1&amp;stream=0.sdp?real_stream</span><br><span class="line">channel 通道</span><br><span class="line">stream  码流 （0主码 1次码）</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>设备相关资料</category>
      </categories>
      <tags>
        <tag>运维</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 平台下载常用控件</title>
    <url>/2021/05/25/%E8%BF%90%E7%BB%B4%E6%8C%87%E5%AF%BC/Linux%E5%B9%B3%E5%8F%B0%E4%B8%8B%E8%BD%BD%E5%B8%B8%E7%94%A8%E6%8E%A7%E4%BB%B6/</url>
    <content><![CDATA[<h3 id="下载lrz-lsz"><a href="#下载lrz-lsz" class="headerlink" title="下载lrz lsz"></a>下载lrz lsz</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">前提保证Linux平台可连外网，telnet进入linux系统，根据不同平台选择下载</span><br><span class="line">wget http://111.231.82.115:8081/lrzszv100.tar</span><br><span class="line"></span><br><span class="line">wget http://111.231.82.115:8081/lrzszv200.tar</span><br><span class="line"></span><br><span class="line">wget http://111.231.82.115:8081/lrzszv400.tar</span><br></pre></td></tr></table></figure>


<h3 id="下载gdb"><a href="#下载gdb" class="headerlink" title="下载gdb"></a>下载gdb</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">前提保证Linux平台可连外网，telnet进入linux系统，根据不同平台选择下载</span><br><span class="line">wget http://111.231.82.115:8081/gdbv100.tar</span><br><span class="line"></span><br><span class="line">wget http://111.231.82.115:8081/gdbv200.tar</span><br></pre></td></tr></table></figure>

<h3 id="下载safer检测程序"><a href="#下载safer检测程序" class="headerlink" title="下载safer检测程序"></a>下载safer检测程序</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">前提保证Linux平台可连外网，telnet进入linux系统，根据不同平台选择下载</span><br><span class="line">wget http://111.231.82.115:8081/safer_v100.tar</span><br><span class="line"></span><br><span class="line">wget http://111.231.82.115:8081/safer_v200.tar</span><br><span class="line"></span><br><span class="line">wget http://111.231.82.115:8081/safer_v400.tar</span><br></pre></td></tr></table></figure>


<h3 id="下载停贝车道与云连接库"><a href="#下载停贝车道与云连接库" class="headerlink" title="下载停贝车道与云连接库"></a>下载停贝车道与云连接库</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">前提保证Linux平台可连外网，telnet进入linux系统</span><br><span class="line">wget http://111.231.82.115:8081/libdt_parking.tar</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>运维指导</category>
      </categories>
      <tags>
        <tag>运维</tag>
      </tags>
  </entry>
  <entry>
    <title>sql常用语句</title>
    <url>/2020/10/15/%E8%BF%90%E7%BB%B4%E6%8C%87%E5%AF%BC/sql%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5/</url>
    <content><![CDATA[<h3 id="sql常用的增删改查"><a href="#sql常用的增删改查" class="headerlink" title="sql常用的增删改查"></a>sql常用的增删改查</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#查询车辆所有进场记录</span><br><span class="line">SELECT * FROM inparkingcars_table WHERE InVoucherNo LIKE &#x27;%蓝苏E08G2G%&#x27; </span><br><span class="line"></span><br><span class="line">#查询车辆某个时间段进场记录 </span><br><span class="line">SELECT * FROM inparkingcars_table WHERE InVoucherNo LIKE &#x27;%蓝苏E08G2G%&#x27; </span><br><span class="line">	and InPassTime BETWEEN &#x27;2020-08-01 10:00:00&#x27; AND &#x27;2020-08-10 10:00:00&#x27;</span><br><span class="line"></span><br><span class="line">#查询车辆是否能入场 </span><br><span class="line">SELECT Inpark(1001011,&#x27;蓝苏E338Q2&#x27;,2,&#x27;蓝苏E338Q2&#x27;,NOW())</span><br><span class="line"></span><br><span class="line">#查询车辆是否能出场 </span><br><span class="line">SELECT Outpark(1001015,&#x27;蓝苏E08G2G&#x27;,2,&#x27;蓝苏E08G2G&#x27;,NOW())</span><br><span class="line"></span><br><span class="line">#更新某辆车的某个时间点的入场记录的出场状态类型 </span><br><span class="line">UPDATE inparkingcars_table SET OutType =3 WHERE InVoucherNo LIKE &#x27;%苏E363L5%&#x27; </span><br><span class="line">	and InPassTime = &#x27;2020-08-11 08:02:35&#x27;</span><br><span class="line"></span><br><span class="line">#更新某辆车的某个时间点的入场记录的车辆类型 </span><br><span class="line">UPDATE inparkingcars_table SET VehicleType =1 WHERE InVoucherNo LIKE &#x27;%苏E12A08%&#x27; </span><br><span class="line">	and InPassTime = &#x27;2020-08-18 10:30:37&#x27;</span><br><span class="line"></span><br><span class="line">#删除某辆车的某个时间点的入场记录 </span><br><span class="line">DELETE inparkingcars_table WHERE InVoucherNo LIKE &#x27;%蓝苏E08G2G%&#x27; </span><br><span class="line">	and InPassTime = &#x27;2020-08-18 10:30:37&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="concat字符串拼接"><a href="#concat字符串拼接" class="headerlink" title="concat字符串拼接"></a>concat字符串拼接</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">concat将两个字符串连接起来</span><br><span class="line">   siteguid = concat（siteguid，&#x27;xxxxxxxxxxxxx;&#x27;）</span><br></pre></td></tr></table></figure>

<h3 id="查看数据库连接"><a href="#查看数据库连接" class="headerlink" title="查看数据库连接"></a>查看数据库连接</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. 查询数据库连接情况</span><br><span class="line">	mysql&gt; show status like &#x27;Threads%&#x27;;  </span><br><span class="line">    +-------------------+-------+  </span><br><span class="line">    | Variable_name     | Value |  </span><br><span class="line">    +-------------------+-------+  </span><br><span class="line">    | Threads_cached    | 58    |  </span><br><span class="line">    | Threads_connected | 57    |   ###这个数值指的是打开的连接数  </span><br><span class="line">    | Threads_created   | 3676  |  </span><br><span class="line">    | Threads_running   | 4     |   ###这个数值指的是激活的连接数，</span><br><span class="line">									这个数值一般远低于connected数值  </span><br><span class="line">    +-------------------+-------+  </span><br><span class="line">       </span><br><span class="line">    Threads_connected 跟show processlist结果相同，表示当前连接数。</span><br><span class="line">	准确的来说，Threads_running是代表当前并发数  </span><br><span class="line">       </span><br><span class="line">	   </span><br><span class="line">2.  这是是查询数据库当前设置的最大连接数  </span><br><span class="line">    mysql&gt; show variables like &#x27;%max_connections%&#x27;;  </span><br><span class="line">    +-----------------+-------+  </span><br><span class="line">    | Variable_name   | Value |  </span><br><span class="line">    +-----------------+-------+  </span><br><span class="line">    | max_connections | 100  |  </span><br><span class="line">    +-----------------+-------+  </span><br><span class="line">       </span><br><span class="line">    可以在/etc/my.cnf里面设置数据库的最大连接数  </span><br><span class="line">    max_connections = 1000</span><br></pre></td></tr></table></figure>

<h3 id="查看缴费记录与出入场对比"><a href="#查看缴费记录与出入场对比" class="headerlink" title="查看缴费记录与出入场对比"></a>查看缴费记录与出入场对比</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select </span><br><span class="line"></span><br><span class="line">inparkingcars_table.InPassTime,</span><br><span class="line">inparkingcars_table.InULID,</span><br><span class="line">outparkingcars_table.OutPassTime,</span><br><span class="line">outparkingcars_table.OutULID,</span><br><span class="line">payrecord_table.PlateCN,</span><br><span class="line">payrecord_table.TransactionNum,</span><br><span class="line">sec_to_time(UNIX_TIMESTAMP(outparkingcars_table.OutPassTime)-UNIX_TIMESTAMP(inparkingcars_table.InPassTime))</span><br><span class="line"></span><br><span class="line"> from</span><br><span class="line">(</span><br><span class="line">SELECT </span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	`payrecord_table`</span><br><span class="line">WHERE</span><br><span class="line">	PlateCN LIKE &#x27;%渝AA845L&#x27;</span><br><span class="line">#AND PaymentMesasure = 1</span><br><span class="line">AND BuildTime BETWEEN &#x27;2020-09-17 00:00&#x27;</span><br><span class="line">AND &#x27;2020-09-17 23:59&#x27;</span><br><span class="line">)payrecord_table</span><br><span class="line">LEFT JOIN inparkingcars_table on payrecord_table.insn = inparkingcars_table.InSN</span><br><span class="line">LEFT JOIN outparkingcars_table on payrecord_table.insn = outparkingcars_table.InSN</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="查看每天的支付金额汇总"><a href="#查看每天的支付金额汇总" class="headerlink" title="查看每天的支付金额汇总"></a>查看每天的支付金额汇总</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	DATE(PayTime),</span><br><span class="line">	SUM(PayAmount) DIV 100</span><br><span class="line">FROM</span><br><span class="line">	`payrecord_table`</span><br><span class="line">WHERE</span><br><span class="line">	PaymentMesasure = &#x27;ETC&#x27;</span><br><span class="line">AND DATE(PayTime) BETWEEN &#x27;2020-09-17&#x27;</span><br><span class="line">AND &#x27;2020-10-14&#x27;</span><br><span class="line">GROUP BY</span><br><span class="line">	DATE(PayTime)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>运维指导</category>
      </categories>
      <tags>
        <tag>运维</tag>
      </tags>
  </entry>
  <entry>
    <title>人行摆闸常见问题汇总</title>
    <url>/2020/09/16/%E8%BF%90%E7%BB%B4%E6%8C%87%E5%AF%BC/%E4%BA%BA%E8%A1%8C%E6%91%86%E9%97%B8%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</url>
    <content><![CDATA[<h3 id="人行摆闸出入记录反向"><a href="#人行摆闸出入记录反向" class="headerlink" title="人行摆闸出入记录反向"></a>人行摆闸出入记录反向</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 修改/home/config.txt 配置文件 en_swap_dir=1</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>运维指导</category>
      </categories>
      <tags>
        <tag>运维</tag>
      </tags>
  </entry>
  <entry>
    <title>收费软件常见问题汇总</title>
    <url>/2020/08/28/%E8%BF%90%E7%BB%B4%E6%8C%87%E5%AF%BC/%E6%94%B6%E8%B4%B9%E8%BD%AF%E4%BB%B6%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</url>
    <content><![CDATA[<h3 id="上位机收费软件抓拍图片获取失败"><a href="#上位机收费软件抓拍图片获取失败" class="headerlink" title="上位机收费软件抓拍图片获取失败"></a>上位机收费软件抓拍图片获取失败</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">新版本json 格式车道配置</span><br><span class="line">删除home/httpd/web/ image 软连接，注意不是imgaes，再 reboot重启</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>运维指导</category>
      </categories>
      <tags>
        <tag>运维</tag>
      </tags>
  </entry>
  <entry>
    <title>数据库常见问题汇总</title>
    <url>/2020/12/28/%E8%BF%90%E7%BB%B4%E6%8C%87%E5%AF%BC/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</url>
    <content><![CDATA[<h3 id="Mysql版本不一致，高版本转换的sql语句，插入低版本失败"><a href="#Mysql版本不一致，高版本转换的sql语句，插入低版本失败" class="headerlink" title="Mysql版本不一致，高版本转换的sql语句，插入低版本失败"></a>Mysql版本不一致，高版本转换的sql语句，插入低版本失败</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Mysql 5.7版本生成的sql语句：</span><br><span class="line">	当个字段：‘create_date’ datetime(0) NULL DEFAULT NULL COMMENT</span><br><span class="line">在5.5以及5.6版本运行失败，解决方案，将datetime 后面的(0)整个删除，在运行。</span><br></pre></td></tr></table></figure>







]]></content>
      <categories>
        <category>运维指导</category>
      </categories>
      <tags>
        <tag>运维</tag>
      </tags>
  </entry>
  <entry>
    <title>车牌识别常见问题汇总</title>
    <url>/2021/09/22/%E8%BF%90%E7%BB%B4%E6%8C%87%E5%AF%BC/%E8%BD%A6%E7%89%8C%E8%AF%86%E5%88%AB%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</url>
    <content><![CDATA[<h3 id="德亚相机开启ftp功能"><a href="#德亚相机开启ftp功能" class="headerlink" title="德亚相机开启ftp功能"></a>德亚相机开启ftp功能</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># cd /usr/bin</span><br><span class="line"># ./tcpsvd -vE 0.0.0.0 21 ftpd -w /</span><br></pre></td></tr></table></figure>

<h3 id="200K相机网关无法设置"><a href="#200K相机网关无法设置" class="headerlink" title="200K相机网关无法设置"></a>200K相机网关无法设置</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># vi /home/etc/ip.cfg</span><br><span class="line"># []后面换行或者删除[]</span><br></pre></td></tr></table></figure>


<h3 id="200K相机扩展内存"><a href="#200K相机扩展内存" class="headerlink" title="200K相机扩展内存"></a>200K相机扩展内存</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1、首先用串口连接DV300板子，更改rc.loacl启动脚本，增加参数 保存</span><br><span class="line">#./load3516dv300 -i</span><br><span class="line">./load3516dv300 -i -osmem 512 -total 1024</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2、reboot 重启时，进入uboot，设置启动参数512M</span><br><span class="line">setenv bootargs &#x27;mem=512M console=ttyAMA0,115200 root=/dev/mtdblock2 rootfstype=yaffs2 rw mtdparts=hinand:1M(boot),4M(kernel),32M(rootfs),-(user)&#x27;</span><br><span class="line"></span><br><span class="line">3、sa table补全</span><br><span class="line"></span><br><span class="line">3、reset</span><br><span class="line"></span><br><span class="line">不需要设置   设置uboot启动参数128M</span><br><span class="line">setenv bootargs &#x27;mem=128M console=ttyAMA0,115200 root=/dev/mtdblock2 rootfstype=yaffs2 rw mtdparts=hinand:1M(boot),4M(kernel),32M(rootfs),-(user)&#x27;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>运维指导</category>
      </categories>
      <tags>
        <tag>运维</tag>
      </tags>
  </entry>
  <entry>
    <title>车道控制器常见问题汇总</title>
    <url>/2022/07/20/%E8%BF%90%E7%BB%B4%E6%8C%87%E5%AF%BC/%E8%BD%A6%E9%81%93%E6%8E%A7%E5%88%B6%E5%99%A8%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</url>
    <content><![CDATA[<h3 id="新版json格式车道更改配置方法一网页修改"><a href="#新版json格式车道更改配置方法一网页修改" class="headerlink" title="新版json格式车道更改配置方法一网页修改"></a>新版json格式车道更改配置方法一网页修改</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">使用 谷歌浏览器或360极速浏览器选择极速模式 </span><br><span class="line">输入 520ip登陆 默认密码123456</span><br></pre></td></tr></table></figure>

<h3 id="停车场ULID号配置说明"><a href="#停车场ULID号配置说明" class="headerlink" title="停车场ULID号配置说明"></a>停车场ULID号配置说明</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ULID=停车场ID*1000 +门号*10 + 道号</span><br></pre></td></tr></table></figure>


<h3 id="新版json格式车道更改配置方法二-配置文件修改"><a href="#新版json格式车道更改配置方法二-配置文件修改" class="headerlink" title="新版json格式车道更改配置方法二 配置文件修改"></a>新版json格式车道更改配置方法二 配置文件修改</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">配置文件路径</span><br><span class="line">/home/httpd/web/json/ip.json为520 ip配置文件</span><br><span class="line">/home/httpd/web/json/no1/cfg.json为通用配置文件</span><br><span class="line">/home/httpd/web/json/no1/led.json为显示屏显示内容格式配置文件</span><br><span class="line">/home/httpd/web/json/no1/customcfg.json为自定义配置文件</span><br></pre></td></tr></table></figure>

<h3 id="新版json格式车道通用配置解析"><a href="#新版json格式车道通用配置解析" class="headerlink" title="新版json格式车道通用配置解析"></a>新版json格式车道通用配置解析</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat /home/httpd/web/json/no1/cfg.json </span><br><span class="line">&#123;</span><br><span class="line">   &quot;EnabelParklc2&quot;:&quot;0&quot;,			//是否使能车道流程2</span><br><span class="line">   &quot;AppId&quot;:        &quot;1&quot;,			//无需更改  </span><br><span class="line">   &quot;SERVICES_URL&quot;: &quot;http://***/RunWellCarParkSys/Service/&quot;,	//后台服务地址 具体项目对应配置 </span><br><span class="line">   &quot;GateNum&quot;:      &quot;0&quot;,			//*门号  	</span><br><span class="line">   &quot;LaneNum&quot;:      &quot;1&quot;,			//*道号   </span><br><span class="line">   &quot;LaneType&quot;:     &quot;Entry&quot;,		//车道类型 入口：Entry 出口：Exit 混合车道 Two-way </span><br><span class="line">   &quot;LaneMode&quot;:     &quot;Normal&quot;,		//车道模式  </span><br><span class="line">   &quot;di_type&quot;:      &quot;0&quot;,			//接线方式 0：GPIO 默认无需更改		</span><br><span class="line">   &quot;triger_mode&quot;:  &quot;0&quot;,			//触发方式 0：线圈触发  1：视频流</span><br><span class="line">   &quot;ParkId&quot;:       &quot;1006&quot;,		//停车场ID</span><br><span class="line">   &quot;Entry&quot;: &#123;			//***************入口配置解析*******************</span><br><span class="line">           &quot;CheckICCardReader&quot;:    &quot;1&quot;,		//是否使能IC卡读写器 1：使能 0：关闭</span><br><span class="line">           &quot;CheckOpenId&quot;:  &quot;0&quot;,</span><br><span class="line">           &quot;OPENID&quot;:       &quot;192.168.0.119:123&quot;,</span><br><span class="line">           &quot;CardReader&quot;:   &quot;&quot;,</span><br><span class="line">           &quot;CheckVPR1&quot;:    &quot;1&quot;,			//是否使能主相机 1：使能 0：关闭	</span><br><span class="line">           &quot;CheckVPR2&quot;:    &quot;0&quot;,			//主相机类型 0：德亚相机 1：华夏相机 需对应更换mod_lpnr.so 动态库</span><br><span class="line">           &quot;vpr1_type&quot;:    &quot;0&quot;,			//是否使能辅相机 1：使能 0：关闭		</span><br><span class="line">           &quot;vpr2_type&quot;:    &quot;0&quot;,			//辅相机类型 0：德亚相机 1：华夏相机 需对应更换mod_lpnr.so 动态库</span><br><span class="line">           &quot;LPNR1&quot;:        &quot;192.168.100.236&quot;,	//主相机ip地址</span><br><span class="line">           &quot;LPNR2&quot;:        &quot;192.168.0.123&quot;,	//辅相机ip地址</span><br><span class="line">           &quot;CheckVouch&quot;:   &quot;0&quot;,			//是否使能标签、天线等读写设备</span><br><span class="line">           &quot;VouchType&quot;:    &quot;RFID&quot;,		//凭证类型</span><br><span class="line">           &quot;VouchIntf&quot;:    &quot;192.168.10.235&quot;,	//凭证设备ip</span><br><span class="line">           &quot;CheckLED&quot;:     &quot;1&quot;,			//是否使能LED屏 1：使能 0：关闭</span><br><span class="line">           &quot;CheckLEDCOM&quot;:  &quot;1&quot;,			//是否使能LED屏串口 1：使能 0：关闭</span><br><span class="line">           &quot;CheckLEDIP&quot;:   &quot;0&quot;,			//是否使能LED屏网口 1：使能 0：关闭</span><br><span class="line">           &quot;LEDCOM&quot;:       &quot;ttyAMA3&quot;,		//LED屏串口号&quot;ttyAMAn&quot; n代表对应串口号</span><br><span class="line">           &quot;LEDIP&quot;:        &quot;172.16.13.205&quot;	//LED屏ip				</span><br><span class="line">   &#125;,</span><br><span class="line">   &quot;Exit&quot;: &#123;			//***************出口配置解析 参照入口*************	</span><br><span class="line">           &quot;CheckICCardReader&quot;:    &quot;1&quot;,</span><br><span class="line">           &quot;CheckOpenId&quot;:  &quot;0&quot;,</span><br><span class="line">           &quot;OPENID&quot;:       &quot;192.168.0.119:123&quot;,</span><br><span class="line">           &quot;CardReader&quot;:   &quot;&quot;,</span><br><span class="line">           &quot;CheckVPR1&quot;:    &quot;1&quot;,</span><br><span class="line">           &quot;CheckVPR2&quot;:    &quot;0&quot;,</span><br><span class="line">           &quot;vpr1_type&quot;:    &quot;0&quot;,</span><br><span class="line">           &quot;vpr2_type&quot;:    &quot;0&quot;,</span><br><span class="line">           &quot;LPNR1&quot;:        &quot;192.168.0.99&quot;,</span><br><span class="line">           &quot;LPNR2&quot;:        &quot;192.168.0.123&quot;,</span><br><span class="line">           &quot;CheckVouch&quot;:   &quot;0&quot;,</span><br><span class="line">           &quot;VouchType&quot;:    &quot;RFID&quot;,</span><br><span class="line">           &quot;VouchIntf&quot;:    &quot;192.168.10.235&quot;,</span><br><span class="line">           &quot;CheckLED&quot;:     &quot;1&quot;,</span><br><span class="line">           &quot;CheckLEDCOM&quot;:  &quot;1&quot;,</span><br><span class="line">           &quot;CheckLEDIP&quot;:   &quot;0&quot;,</span><br><span class="line">           &quot;LEDCOM&quot;:       &quot;ttyAMA2&quot;,</span><br><span class="line">           &quot;LEDIP&quot;:        &quot;192.168.0.119&quot;</span><br><span class="line">   &#125;,					//***************高级配置解析*************</span><br><span class="line">   &quot;Area&quot;: &quot;undefined&quot;,				//区域设置 默认无需更改</span><br><span class="line">   &quot;LaneIsOpen&quot;:   &quot;1&quot;,				//车道开启状态 1：开启 0：关闭</span><br><span class="line">   &quot;NoPlateNumPolicy&quot;:     &quot;2&quot;,			//无车牌策略 具体详见控制器网页配置选项  3为无牌车请求后台</span><br><span class="line">   &quot;NotInWhiteListPolicy&quot;: &quot;2&quot;,			//临时车策略 具体详见控制器网页配置选项</span><br><span class="line">   &quot;UploadImgType&quot;:        &quot;1&quot;,			//图片上传网络类型 1:有线网络 具体详见控制器网页配置选项</span><br><span class="line">   &quot;CancelTradeTimer&quot;:     &quot;undefined&quot;,		//取消交易定时器 默认，后续在自定义配置中增加</span><br><span class="line">   &quot;SysMaxTrade&quot;:  &quot;undefined&quot;,			//系统最大交易 默认</span><br><span class="line">   &quot;MaxSoftTrigger&quot;:       &quot;undefined&quot;,		//最大触发次数 默认</span><br><span class="line">   &quot;SetSourceOfIOTrigger&quot;: &quot;1&quot;,			//指定IO触发源 默认 1：标准 </span><br><span class="line">   &quot;GetWireImg&quot;:   &quot;1&quot;</span><br></pre></td></tr></table></figure>

<h3 id="新版json格式-车道更改本地模式-显示屏语音内容"><a href="#新版json格式-车道更改本地模式-显示屏语音内容" class="headerlink" title="新版json格式 车道更改本地模式 显示屏语音内容"></a>新版json格式 车道更改本地模式 显示屏语音内容</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;sound&quot;:    &quot;欢迎光临&quot;	#Json格式 修改led.json 自定义配置文件</span><br></pre></td></tr></table></figure>


<h3 id="车道更改自由流模式"><a href="#车道更改自由流模式" class="headerlink" title="车道更改自由流模式"></a>车道更改自由流模式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mode=free  			#键值对格式 修改lane.cfg 配置文件</span><br><span class="line"></span><br><span class="line">&quot;mode&quot;:    &quot;free&quot;	#Json格式 修改customcfg.json 自定义配置文件</span><br></pre></td></tr></table></figure>


<h3 id="车道程序与系统时间不一致"><a href="#车道程序与系统时间不一致" class="headerlink" title="车道程序与系统时间不一致"></a>车道程序与系统时间不一致</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">第一种对时方法：</span><br><span class="line">车道与后台对时，不需要更改时区的。</span><br><span class="line">如果有问题：输入export TZ=&quot;&quot;。</span><br><span class="line"></span><br><span class="line">注：</span><br><span class="line">date -s&quot;&quot;,,   记得hwclock -w</span><br><span class="line"></span><br><span class="line">查看时区：  echo $TZ   (可以看到是 CST-8)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第二种对时方法：</span><br><span class="line">服务器的windowstime  服务要开启。</span><br><span class="line">然后对时部分。注意赋权限chmod +x ntpc,ntpcdate</span><br><span class="line">./ntpc -s 172.16.12.87 -i 3600 -r &gt;/dev/null </span><br><span class="line">(注：对时服务器服务要开启，ip为服务器ip)</span><br><span class="line">ntpc对时完成后只是车道与服务器时间对时好了，</span><br><span class="line">	但程序的运行时间时区还是不对的，所以此时还要</span><br><span class="line">export TZ=CST-8   （把程序运行时间和时区与车控器对时）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">开机自启脚本里：(注意放在parklc的前面)</span><br><span class="line">export TZ=CST-8</span><br><span class="line">cd /home/bin                                                                       </span><br><span class="line">chmod +x ntpc                                                                      </span><br><span class="line">./ntpc -s 172.16.12.87 -i 3600 -r &gt;/dev/null  </span><br></pre></td></tr></table></figure>
<h3 id="配置语音内容以及音量大小"><a href="#配置语音内容以及音量大小" class="headerlink" title="配置语音内容以及音量大小"></a>配置语音内容以及音量大小</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">更改显示屏语音内容以及音量大小，led.cfg配置中更改：SOUND=“”VOL=1</span><br></pre></td></tr></table></figure>

<h3 id="缴费机配置语音音量大小"><a href="#缴费机配置语音音量大小" class="headerlink" title="缴费机配置语音音量大小"></a>缴费机配置语音音量大小</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pay led.cfg配置中最后更改：VOL=&quot;3&quot;  可调整范围1-8</span><br></pre></td></tr></table></figure>

<h3 id="修改日志文件大小"><a href="#修改日志文件大小" class="headerlink" title="修改日志文件大小"></a>修改日志文件大小</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">旧版本键值对车道程序，修改日志大小：g_shmptr-&gt;oplog_limit=512000（日志大小500K）</span><br></pre></td></tr></table></figure>

<h3 id="过车请求后台gui间隔"><a href="#过车请求后台gui间隔" class="headerlink" title="过车请求后台gui间隔"></a>过车请求后台gui间隔</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">waitguitime=1000  			#键值对格式 设置1s</span><br><span class="line"></span><br><span class="line">&quot;waitguitime&quot;:     &quot;1000&quot;	#Json格式 设置1s ，默认</span><br></pre></td></tr></table></figure>


<h3 id="视频流延时取消交易"><a href="#视频流延时取消交易" class="headerlink" title="视频流延时取消交易"></a>视频流延时取消交易</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">trans_timeout=20000  			#键值对格式 设置20s</span><br><span class="line"></span><br><span class="line">&quot;trans_timeout&quot;:     &quot;20000&quot;	#Json格式 设置20s	</span><br></pre></td></tr></table></figure>

<h3 id="两线圈模式设置延时取消交易时长"><a href="#两线圈模式设置延时取消交易时长" class="headerlink" title="两线圈模式设置延时取消交易时长"></a>两线圈模式设置延时取消交易时长</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">旧版本键值对车道程序，倒车或由于线圈停在两个线圈之间：</span><br><span class="line">延时取消交易：delaycanceltrans=2000</span><br><span class="line"></span><br><span class="line">新版本延时取消交易：&quot;delaycanceltrans&quot;:     &quot;2000&quot;   注意Json格式，</span><br></pre></td></tr></table></figure>

<h3 id="新版json版本车道程序，更改配置未生效"><a href="#新版json版本车道程序，更改配置未生效" class="headerlink" title="新版json版本车道程序，更改配置未生效"></a>新版json版本车道程序，更改配置未生效</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">新版json格式 车道程序，更改配置未生效：chmod +x /home/httpd/web/cgi-bin/*</span><br></pre></td></tr></table></figure>

<h3 id="新版json版本车道程序，使能本地白名单优先"><a href="#新版json版本车道程序，使能本地白名单优先" class="headerlink" title="新版json版本车道程序，使能本地白名单优先"></a>新版json版本车道程序，使能本地白名单优先</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">新版json格式 车道程序，更改customcfg.json 配置文件：&quot;enable_local_db&quot;:     &quot;yes&quot;</span><br></pre></td></tr></table></figure>

<h3 id="新版json版本车道程序，一入一出-配置出口-压线圈自动抬杆模式"><a href="#新版json版本车道程序，一入一出-配置出口-压线圈自动抬杆模式" class="headerlink" title="新版json版本车道程序，一入一出 配置出口 压线圈自动抬杆模式"></a>新版json版本车道程序，一入一出 配置出口 压线圈自动抬杆模式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">新版json格式 车道程序，更改customcfg.json 配置文件：&quot;exit_noplate_free&quot;:     &quot;yes&quot;</span><br></pre></td></tr></table></figure>


<h3 id="新版json版本车道程序，本地名单播放语音设置"><a href="#新版json版本车道程序，本地名单播放语音设置" class="headerlink" title="新版json版本车道程序，本地名单播放语音设置"></a>新版json版本车道程序，本地名单播放语音设置</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">新版json格式 车道程序，更改led.json 配置文件：&quot;sound&quot;:     &quot;欢迎光临&quot;</span><br></pre></td></tr></table></figure>



<h3 id="新版json版本车道程序，出口正常模式，增加无牌车策略，是否自动抬杆"><a href="#新版json版本车道程序，出口正常模式，增加无牌车策略，是否自动抬杆" class="headerlink" title="新版json版本车道程序，出口正常模式，增加无牌车策略，是否自动抬杆"></a>新版json版本车道程序，出口正常模式，增加无牌车策略，是否自动抬杆</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">新版json格式 车道程序，更改customcfg.json 配置文件：&quot;exit_noplate_free&quot;:     &quot;yes&quot;</span><br></pre></td></tr></table></figure>


<h3 id="实时查看4G卡流量使用情况命令"><a href="#实时查看4G卡流量使用情况命令" class="headerlink" title="实时查看4G卡流量使用情况命令"></a>实时查看4G卡流量使用情况命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">watch -n 5 &quot;ifconfig ppp0&quot;    5就是每隔5秒刷新一次，RX和TX的数据相加就是某一段时间使用的4G流量</span><br><span class="line">（设备重启后流量统计会清零并重新记录），1M=1024K</span><br></pre></td></tr></table></figure>


<h3 id="新版json版本车道程序，不支持当面付，不再次询问后台，直接返回AskGui-交给上位机处理"><a href="#新版json版本车道程序，不支持当面付，不再次询问后台，直接返回AskGui-交给上位机处理" class="headerlink" title="新版json版本车道程序，不支持当面付，不再次询问后台，直接返回AskGui 交给上位机处理"></a>新版json版本车道程序，不支持当面付，不再次询问后台，直接返回AskGui 交给上位机处理</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">新版json格式 车道程序，更改customcfg.json 配置文件：&quot;enable_prepay&quot;:     &quot;false&quot;</span><br></pre></td></tr></table></figure>

<h3 id="车道使用200H相机-parklc程序经常挂"><a href="#车道使用200H相机-parklc程序经常挂" class="headerlink" title="车道使用200H相机  parklc程序经常挂"></a>车道使用200H相机  parklc程序经常挂</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">连接相机登录，点击更多操作-&gt;图片参数-&gt;将车牌特写图取消勾选。</span><br></pre></td></tr></table></figure>

<h3 id="新版json版本车道程序，忽略抬杆反馈"><a href="#新版json版本车道程序，忽略抬杆反馈" class="headerlink" title="新版json版本车道程序，忽略抬杆反馈"></a>新版json版本车道程序，忽略抬杆反馈</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">不接抬杆反馈，在自定义配置中增加 : &quot;ignore_alb_feedback&quot;:&quot;yes&quot;</span><br></pre></td></tr></table></figure>


<h3 id="新版json版本车道程序，车道配置是视频流-自由流-无线圈"><a href="#新版json版本车道程序，车道配置是视频流-自由流-无线圈" class="headerlink" title="新版json版本车道程序，车道配置是视频流+自由流+无线圈"></a>新版json版本车道程序，车道配置是视频流+自由流+无线圈</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">customcfg.json 自定义参数添加 &quot;no_loops&quot;:&quot;yes&quot;</span><br></pre></td></tr></table></figure>

<h3 id="新版json版本车道程序，无道闸，车道配置出入口识别到车牌上报过车"><a href="#新版json版本车道程序，无道闸，车道配置出入口识别到车牌上报过车" class="headerlink" title="新版json版本车道程序，无道闸，车道配置出入口识别到车牌上报过车"></a>新版json版本车道程序，无道闸，车道配置出入口识别到车牌上报过车</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">customcfg.json 自定义参数添加 </span><br><span class="line">&quot;is_entry_has_plate_free&quot;:&quot;yes&quot;</span><br><span class="line">&quot;is_exit_has_plate_free&quot;:&quot;yes&quot;</span><br></pre></td></tr></table></figure>


<h3 id="配置不上传过车图片"><a href="#配置不上传过车图片" class="headerlink" title="配置不上传过车图片"></a>配置不上传过车图片</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">customcfg.json 自定义参数添加 &quot;enable_image_upload&quot;:&quot;0&quot;</span><br></pre></td></tr></table></figure>


<h3 id="新版json版本车道程序，车道与后台网络断开，使用本地白名单，需先对时"><a href="#新版json版本车道程序，车道与后台网络断开，使用本地白名单，需先对时" class="headerlink" title="新版json版本车道程序，车道与后台网络断开，使用本地白名单，需先对时"></a>新版json版本车道程序，车道与后台网络断开，使用本地白名单，需先对时</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">data -s &quot;2020-04-06 11:50:30&quot;</span><br><span class="line">hwclock -w</span><br></pre></td></tr></table></figure>
<h3 id="混合车道出口自由流模式-压线圈抬杆-，暂时只能用旧版本键值对模式的车道程序"><a href="#混合车道出口自由流模式-压线圈抬杆-，暂时只能用旧版本键值对模式的车道程序" class="headerlink" title="混合车道出口自由流模式(压线圈抬杆)，暂时只能用旧版本键值对模式的车道程序"></a>混合车道出口自由流模式(压线圈抬杆)，暂时只能用旧版本键值对模式的车道程序</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">车道模式lane.conf配置 semi-twoway</span><br></pre></td></tr></table></figure>
<h3 id="车道控制器时区问题"><a href="#车道控制器时区问题" class="headerlink" title="车道控制器时区问题"></a>车道控制器时区问题</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">开机脚本里 export TZ=&quot;CST-8&quot;放到 hwclock -i之后</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">如果手动对时的并操作hwclock的话，确保按照如下操作</span><br><span class="line">export TZ=&quot;&quot;</span><br><span class="line">date -s &quot;2021-08-09 11:11:11&quot;</span><br><span class="line">hwclock -w</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="无牌车扫码车道配置"><a href="#无牌车扫码车道配置" class="headerlink" title="无牌车扫码车道配置"></a>无牌车扫码车道配置</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">系统配置cfg.json 里有个CheckOpenId 配置成1, </span><br><span class="line">OPENID配置成后台扫码服务的IP:port</span><br></pre></td></tr></table></figure>


<h3 id="闲时LED自定义配置"><a href="#闲时LED自定义配置" class="headerlink" title="闲时LED自定义配置"></a>闲时LED自定义配置</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">customcfg.json 自定义配置里，has_idle_ledinfo 配置成1，同时注意需要配套adm</span><br></pre></td></tr></table></figure>







]]></content>
      <categories>
        <category>运维指导</category>
      </categories>
      <tags>
        <tag>运维</tag>
      </tags>
  </entry>
  <entry>
    <title>车道控制器挂在固态硬盘</title>
    <url>/2020/08/20/%E8%BF%90%E7%BB%B4%E6%8C%87%E5%AF%BC/%E8%BD%A6%E9%81%93%E6%8E%A7%E5%88%B6%E5%99%A8%E6%8C%82%E5%9C%A8%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98/</url>
    <content><![CDATA[<h3 id="硬盘挂载初始化流程"><a href="#硬盘挂载初始化流程" class="headerlink" title="硬盘挂载初始化流程"></a>硬盘挂载初始化流程</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在有些项目中要求程序运行生成的日志或图片要保存一段时间，这样容量的要求会比较大，</span><br><span class="line">520C自带的内存只有几十兆不能满足这一需求，所以会加装一个固态硬盘挂载到相关目录下。</span><br><span class="line"></span><br><span class="line">以正生工业园项目或佰利食品项目的Gui文件夹挂载为例</span><br></pre></td></tr></table></figure>

<h3 id="第一步骤"><a href="#第一步骤" class="headerlink" title="第一步骤"></a>第一步骤</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">先格式化硬盘:</span><br><span class="line">输入：mkfs.ext4 /dev/sda 再输入Y等待格式化完成（出现#号键）</span><br></pre></td></tr></table></figure>

<h3 id="第二步骤"><a href="#第二步骤" class="headerlink" title="第二步骤"></a>第二步骤</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">然后将Gui文件夹移动到var目录</span><br><span class="line">输入：mv /home/Gui/ /var/</span><br></pre></td></tr></table></figure>

<h3 id="第三步骤"><a href="#第三步骤" class="headerlink" title="第三步骤"></a>第三步骤</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">然后在home下重建一个Gui文件夹</span><br><span class="line">输入：mkdir Gui</span><br></pre></td></tr></table></figure>


<h3 id="第四步骤"><a href="#第四步骤" class="headerlink" title="第四步骤"></a>第四步骤</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">然后将硬盘挂载到Gui文件夹</span><br><span class="line">输入：mount /dev/sda /home/Gui/</span><br></pre></td></tr></table></figure>

<h3 id="第五步骤"><a href="#第五步骤" class="headerlink" title="第五步骤"></a>第五步骤</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">然后将var/Gui/的文件移动回来</span><br><span class="line">输入：mv /var/Gui /home/Gui/</span><br><span class="line">最后在启动脚本rc.local中添加自启动挂载命令（sleep2秒后挂载）</span><br></pre></td></tr></table></figure>

<h3 id="命令解析"><a href="#命令解析" class="headerlink" title="命令解析"></a>命令解析</h3><p><img src="%E5%91%BD%E4%BB%A4%E8%A7%A3%E6%9E%90.png"></p>
<h3 id="启动脚本更改"><a href="#启动脚本更改" class="headerlink" title="启动脚本更改"></a>启动脚本更改</h3><p><img src="%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E6%9B%B4%E6%94%B9.png"></p>
]]></content>
      <categories>
        <category>运维指导</category>
      </categories>
      <tags>
        <tag>运维</tag>
      </tags>
  </entry>
  <entry>
    <title>车道控制器文件系统烧录</title>
    <url>/2020/08/19/%E8%BF%90%E7%BB%B4%E6%8C%87%E5%AF%BC/%E8%BD%A6%E9%81%93%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%83%A7%E5%BD%95/</url>
    <content><![CDATA[<h3 id="第一步骤"><a href="#第一步骤" class="headerlink" title="第一步骤"></a>第一步骤</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用usb-串口线连接电脑和车控器Com0口，插上电源和网线，打开FastBoot软件，如图所示。</span><br></pre></td></tr></table></figure>
<p><img src="%E7%AC%AC%E4%B8%80%E6%AD%A5%E9%AA%A4.png"></p>
<h3 id="第二步骤"><a href="#第二步骤" class="headerlink" title="第二步骤"></a>第二步骤</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">设置Serial Port端口号（根据电脑管理-&gt;设备管理器-&gt;端口查看）</span><br><span class="line">和Server IP（选择本机电脑的IP地址）。</span><br></pre></td></tr></table></figure>
<p><img src="%E7%AC%AC%E4%BA%8C%E6%AD%A5%E9%AA%A4.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Board Config，设置目标板IP地址，与本机同一网段。</span><br></pre></td></tr></table></figure>
<h3 id="第三步骤"><a href="#第三步骤" class="headerlink" title="第三步骤"></a>第三步骤</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">如下图，选择“Burn by Address”，“Flash Type”选择spi，</span><br><span class="line">Address：输入“0”，Length：输入“0x2000000”。</span><br></pre></td></tr></table></figure>
<p><img src="%E7%AC%AC%E4%B8%89%E6%AD%A5%E9%AA%A4.png"></p>
<h3 id="第四步骤"><a href="#第四步骤" class="headerlink" title="第四步骤"></a>第四步骤</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">File：Browse选择浏览要烧的镜像xxx.img文件，如图所示。</span><br></pre></td></tr></table></figure>
<p><img src="%E7%AC%AC%E5%9B%9B%E6%AD%A5%E9%AA%A4.png"></p>
<h3 id="第五步骤"><a href="#第五步骤" class="headerlink" title="第五步骤"></a>第五步骤</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">点击Burn，开始烧录。重插电源，若一直在重复下载中，此时关闭防火墙即可。</span><br></pre></td></tr></table></figure>
<p><img src="%E7%AC%AC%E4%BA%94%E6%AD%A5%E9%AA%A4.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">等待出现“Successful”。</span><br></pre></td></tr></table></figure>
<p><img src="%E7%AC%AC%E5%85%AD%E6%AD%A5%E9%AA%A4.png"></p>
]]></content>
      <categories>
        <category>运维指导</category>
      </categories>
      <tags>
        <tag>运维</tag>
      </tags>
  </entry>
  <entry>
    <title>镭视一体机基于百度SDK的反光条程序更新步骤</title>
    <url>/2021/11/29/%E8%BF%90%E7%BB%B4%E6%8C%87%E5%AF%BC/%E9%95%AD%E8%A7%86%E4%B8%80%E4%BD%93%E6%9C%BA%E5%9F%BA%E4%BA%8E%E7%99%BE%E5%BA%A6SDK%E7%9A%84%E5%8F%8D%E5%85%89%E6%9D%A1%E7%A8%8B%E5%BA%8F%E6%9B%B4%E6%96%B0%E6%AD%A5%E9%AA%A4/</url>
    <content><![CDATA[<h3 id="算法简介"><a href="#算法简介" class="headerlink" title="算法简介"></a>算法简介</h3><ul>
<li>车辆红白条检测：基于车辆反光条检测算法，能实现车辆侧身红白条功能检测，定位判断条数。</li>
</ul>
<h3 id="更新步骤使用说明"><a href="#更新步骤使用说明" class="headerlink" title="更新步骤使用说明"></a>更新步骤使用说明</h3><ul>
<li><p>1.拷贝root文件夹到目标系统(车头相机)的/目录下</p>
</li>
<li><p>2.拷贝home/目录下的 RES文件夹、 ez_detect_bar、lib.tar到/home目录</p>
</li>
<li><p>3.telnet ip进入目标系统，进行解压lib.tar，首先进入home文件夹cd /home ，tar进行解决 tar -xvf lib.tar,覆盖原有的/home/lib目录</p>
</li>
<li><p>4.（重要）修改/home/etc/ip.cfg的mac地址，使用百度红白条程序的设备新地址必须是macaddr=04:16:C4:22:E4:09</p>
</li>
<li><p>5.修改home/vcs.ini文件的[vcs_cfg]配置项下面添加 init_vb=0</p>
</li>
<li><p>6.修改启动脚本 vi/home/etc/rc.local 在最后添加如下内容：</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export HOME=/root</span><br><span class="line">cd /home</span><br><span class="line">chmod +x ez_detect_bar</span><br><span class="line">chmod +x vehicle_type</span><br><span class="line">./ez_detect_bar &gt;/dev/null &amp;</span><br><span class="line">chmod +x vehicle_type</span><br><span class="line">./vehicle_type &gt;/dev/null &amp;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>7.步骤可3~6参考home目录下ip.cfg、rc.local、vcs.ini文件</p>
</li>
<li><p>8.如果遇到空间不足的情况，先删除/home/wk/bar.wk模型文件</p>
</li>
</ul>
]]></content>
      <categories>
        <category>运维指导</category>
      </categories>
      <tags>
        <tag>运维</tag>
      </tags>
  </entry>
  <entry>
    <title>项目软件安装部署文件命名规则</title>
    <url>/2022/07/12/%E8%BF%90%E7%BB%B4%E6%8C%87%E5%AF%BC/%E9%A1%B9%E7%9B%AE%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E6%96%87%E4%BB%B6%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99/</url>
    <content><![CDATA[<h3 id="项目技术文件命名规则"><a href="#项目技术文件命名规则" class="headerlink" title="项目技术文件命名规则"></a>项目技术文件命名规则</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">公司编码--文件分类编码--文件序号---版本号--具体文件名称</span><br><span class="line">如：</span><br><span class="line">德亚DY公司技术部软件JSRJ，停车场P，配置说明IM，文件编号顺序为01，若有多个序号+1，版本号为第一个版本V1.0。</span><br><span class="line">文件编码则为：DY-JSRJ-P-IM-01V1.0</span><br><span class="line">德亚DY公司技术部软件JSRJ，停车场P，操作手册OM，文件编号顺序为01，版本号为第一个版本V1.0。</span><br><span class="line">文件编码则为：DY-JSRJ-P-OM-01V1.0</span><br><span class="line">德亚DY公司技术部软件JSRJ，停车场P，系统问题分析说明PAD，文件编号顺序为01，版本号为第一个版本V1.0。</span><br><span class="line">文件编码则为：DY-JSRJ-P-PAD-01V1.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">德亚DY公司技术部软件JSRJ，停车场P2(V2版本)，操作说明OM，文件编号顺序为01，版本号为第一个版本V1.0。</span><br><span class="line">文件编码则为：DY-JSRJ-P2-OM-01V1.0-具体文件名称</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line">具体项目文件编号</span><br><span class="line">德亚DY公司技术部软件JSRJ，停车场P，项目简称或拼音首字母如SEW，操作说明OM，文件编号顺序为01，版本号为第一个版本V1.0。</span><br><span class="line">文件编码则为：DY-JSRJ-P-SEW-OM-01V1.0</span><br><span class="line">德亚DY公司技术部软件JSRJ，停车场P，项目简称或拼音首字母如SEW，安装部署说明IM，文件编号顺序为01，版本号为第一个版本V1.0。</span><br><span class="line">文件编码则为：DY-JSRJ-P-SEW-IM-01V1.0</span><br><span class="line"></span><br><span class="line">停贝TB公司技术部软件JSRJ，停车场P，项目简称或拼音首字母，如标准车场standard，操作说明OM，文件编号顺序为01，版本号为第一个版本V1.0。</span><br><span class="line">文件编码则为：TB-JSRJ-P-standard-OM-01V1.0</span><br><span class="line">停贝TB公司技术部软件JSRJ，停车场P，项目简称或拼音首字母，如标准车场standard，安装部署说明IM，文件编号顺序为01，版本号为第一个版本V1.0。</span><br><span class="line">文件编码则为：TB-JSRJ-P-standard-IM-01V1.0</span><br><span class="line"></span><br></pre></td></tr></table></figure>







]]></content>
      <categories>
        <category>运维指导</category>
      </categories>
      <tags>
        <tag>运维</tag>
      </tags>
  </entry>
  <entry>
    <title>百度高位识别算法简介</title>
    <url>/2021/08/26/%E8%BF%90%E7%BB%B4%E6%8C%87%E5%AF%BC/%E9%AB%98%E4%BD%8D%E7%9B%B8%E6%9C%BA%E5%8D%97%E4%BA%AC%E5%81%9C%E8%BD%A6%E9%A1%B9%E7%9B%AE%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/</url>
    <content><![CDATA[<h3 id="算法简介"><a href="#算法简介" class="headerlink" title="算法简介"></a>算法简介</h3><ul>
<li><p>车流统计：基于车辆检测&amp;跟踪算法，能实现对连续视频流的车辆检测以及跟踪，检测车辆的位置以及每辆车所处位置与设定的动态区域的关联信息，在停车管理项目中，通过画面框定对停车位进行画框，画框后产生的区域信息作为该算法的动态区域。</p>
</li>
<li><p>车牌识别：该算法能实现对一帧图片中的多辆车牌进行检测，并输出车牌信息。</p>
</li>
</ul>
<h3 id="能力组合"><a href="#能力组合" class="headerlink" title="能力组合"></a>能力组合</h3><p>由于在停车场景中，不仅需要检测车辆的停泊情况，还需要输出对应的车牌信息，因此对上述两种算法进行能力组合，通过EB管理系统上传一个模型文件包即可部署。</p>
<h3 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h3><ul>
<li>盒子基础操作使用文档：<a href="https://ai.baidu.com/ai-doc/HWCE/Skqqbavz1">在线文档</a></li>
<li>基本步骤：上传模型；配置回调接口；创建摄像头并和模型关联；通过画面框定绘制车位区域；</li>
<li>其它工具类：VLC、向日葵软件（方便远程调试）</li>
</ul>
<h3 id="回调接口输出"><a href="#回调接口输出" class="headerlink" title="回调接口输出"></a>回调接口输出</h3><ul>
<li><p>说明</p>
<p>盒子通过回调接口向服务器发送post请求，包含以下信息</p>
<p>request_type：请求类型。分别表示出入场</p>
<p>device_id：设备ID。暂不支持</p>
<p>camera_id：摄像头ID</p>
<p>camera_name：摄像头名称</p>
<p>model_id：模型ID（由于对能力进行了组合，实际部署只有一个模型包）</p>
<p>parking_info：停车记录信息</p>
<p>​        area_id: 停车位ID</p>
<p>​        area_name：停车位名称</p>
<p>​        car_id：车辆ID</p>
<p>​        plate_num：车牌号</p>
<p>​        plate_color: 颜色。[0:blue, 1:yellow, 2:green, 3:white, 4:black, 5:unknow]</p>
<p>​        time：出入场时间</p>
<p>​        base64_img：车辆图片</p>
<ul>
<li>入场请求</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  	<span class="attr">&quot;request_type&quot;</span><span class="punctuation">:</span><span class="string">&quot;enter&quot;</span><span class="punctuation">,</span></span><br><span class="line">  	<span class="attr">&quot;device_id&quot;</span><span class="punctuation">:</span><span class="string">&quot;00000000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;camera_id&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;camera_name&quot;</span><span class="punctuation">:</span><span class="string">&quot;local_video1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;model_id&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;parking_info&quot;</span><span class="punctuation">:</span></span><br><span class="line">  			<span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;area_id&quot;</span><span class="punctuation">:</span><span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">          	<span class="attr">&quot;area_name&quot;</span><span class="punctuation">:</span><span class="string">&quot;tc0002&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;car_id&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;plate_num&quot;</span><span class="punctuation">:</span><span class="string">&quot;浙A34535&quot;</span><span class="punctuation">,</span></span><br><span class="line">          	<span class="attr">&quot;plate_color&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;time&quot;</span><span class="punctuation">:</span><span class="string">&quot;2021.08.05 04:41:01&quot;</span><span class="punctuation">,</span></span><br><span class="line"> 						<span class="attr">&quot;base64_img&quot;</span><span class="punctuation">:</span><span class="string">&quot;xxxxxxxxxxx&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>出场请求</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  	<span class="attr">&quot;request_type&quot;</span><span class="punctuation">:</span><span class="string">&quot;exit&quot;</span><span class="punctuation">,</span></span><br><span class="line">  	<span class="attr">&quot;device_id&quot;</span><span class="punctuation">:</span><span class="string">&quot;00000000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;camera_id&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;camera_name&quot;</span><span class="punctuation">:</span><span class="string">&quot;local_video1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;model_id&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;parking_info&quot;</span><span class="punctuation">:</span></span><br><span class="line">  			<span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;area_id&quot;</span><span class="punctuation">:</span><span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">          	<span class="attr">&quot;area_name&quot;</span><span class="punctuation">:</span><span class="string">&quot;tc0002&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;car_id&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;plate_num&quot;</span><span class="punctuation">:</span><span class="string">&quot;null&quot;</span><span class="punctuation">,</span></span><br><span class="line">          	<span class="attr">&quot;plate_color&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;time&quot;</span><span class="punctuation">:</span><span class="string">&quot;2021-08-05 17:02:11&quot;</span><span class="punctuation">,</span></span><br><span class="line"> 						<span class="attr">&quot;base64_img&quot;</span><span class="punctuation">:</span><span class="string">&quot;xxxxxxxxxxx&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="其它操作说明"><a href="#其它操作说明" class="headerlink" title="其它操作说明"></a>其它操作说明</h3><ul>
<li><p>IP修改：</p>
<p>举例说明：设置 eth0 网卡地址为 172.16.12.230的命令如下，</p>
<h5 id="修改conectiong-并生效"><a href="#修改conectiong-并生效" class="headerlink" title="修改conectiong 并生效"></a>修改conectiong 并生效</h5><p>通过修改 connection ： nmcli c modify ebm-eth0 ipv4.addr ‘172.16.12.230/24’ ipv4.gateway 172.16.12.1 ipv4.method manual ipv4.route-metric 700</p>
<p>激活 connection： nmcli c up edgeboard_eth0</p>
</li>
<li><p>摄像机验证</p>
<p>RTSP摄像机请确保和设备在同一网络下，测试方法：在盒子里ping 相机的IP</p>
<p>rtsp地址格式参考如下：</p>
<p>大华：rtsp://admin:<a href="mailto:&#x65;&#98;&#x31;&#x32;&#51;&#52;&#53;&#54;&#64;&#49;&#57;&#x32;&#x2e;&#x31;&#54;&#x38;&#46;&#49;&#46;&#49;&#x31;&#53;">&#x65;&#98;&#x31;&#x32;&#51;&#52;&#53;&#54;&#64;&#49;&#57;&#x32;&#x2e;&#x31;&#54;&#x38;&#46;&#49;&#46;&#49;&#x31;&#53;</a>:554/cam/realmonitor?channel=1&amp;subtype=0</p>
<p>海康：rtsp://admin:<a href="mailto:&#101;&#98;&#x31;&#x32;&#51;&#52;&#x35;&#54;&#64;&#49;&#x39;&#50;&#x2e;&#x31;&#x36;&#x38;&#x2e;&#x31;&#46;&#x31;&#54;&#x38;">&#101;&#98;&#x31;&#x32;&#51;&#52;&#x35;&#54;&#64;&#49;&#x39;&#50;&#x2e;&#x31;&#x36;&#x38;&#x2e;&#x31;&#46;&#x31;&#54;&#x38;</a>:554/h264/ch1/main/av_stream</p>
<p>rtsp视频流解析测试：</p>
<ol>
<li><p>VLC：用VLC播放rtsp地址，测试是否能正常播放。</p>
</li>
<li><p>设备终端：将下面的命令其中的”rtsp://……”更换成当时的rtsp地址，然后在盒子里任意目录下执行，等待数秒后，会在当前目录下生成若干张jpg图片文件，如果没有生成jpg文件，说明gstreamer解析视频流失败，请再次检查网络、rtsp地址格式是否错误、缺少必要信息等。</p>
</li>
</ol>
<p>gst-launch-1.0 rtspsrc location=”rtsp://admin:<a href="mailto:&#x73;&#x7a;&#x64;&#121;&#x63;&#x73;&#49;&#x32;&#51;&#52;&#53;&#54;&#64;&#x31;&#x37;&#x32;&#x2e;&#49;&#54;&#46;&#x31;&#50;&#x2e;&#x31;&#54;&#x39;">&#x73;&#x7a;&#x64;&#121;&#x63;&#x73;&#49;&#x32;&#51;&#52;&#53;&#54;&#64;&#x31;&#x37;&#x32;&#x2e;&#49;&#54;&#46;&#x31;&#50;&#x2e;&#x31;&#54;&#x39;</a>:554/h264/ch1/main/av_stream” latency=0 ! rtph264depay ! h264parse ! omxh264dec ! videorate ! video/x-raw,framerate=2/1 ! videoconvert ! jpegenc !  multifilesink location=”frame%d.jpg”<br>gst-launch-1.0 rtspsrc location=”rtsp://admin:<a href="mailto:&#x61;&#x64;&#x6d;&#105;&#x6e;&#x40;&#49;&#55;&#x32;&#x2e;&#49;&#54;&#x2e;&#x31;&#x32;&#46;&#49;&#57;&#x39;">&#x61;&#x64;&#x6d;&#105;&#x6e;&#x40;&#49;&#55;&#x32;&#x2e;&#49;&#54;&#x2e;&#x31;&#x32;&#46;&#49;&#57;&#x39;</a>/stream_main” latency=0 ! rtph264depay ! h264parse ! omxh264dec ! videorate ! video/x-raw,framerate=2/1 ! videoconvert ! jpegenc !  multifilesink location=”frame%d.jpg” </p>
</li>
</ul>
]]></content>
      <categories>
        <category>运维指导</category>
      </categories>
      <tags>
        <tag>运维</tag>
      </tags>
  </entry>
</search>
